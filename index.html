<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jag Manalang</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">JAGARTHOUSE</div>
            <!-- <ul>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul> -->
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="video-container">
                <!--
                  To use GIFs:
                  1. Convert your videos to GIFs (you can use online tools like ezgif.com, giphy.com, or ffmpeg).
                  2. Place the GIF files in the videos/ folder.
                  3. Update the src attributes below with your GIF filenames.
                -->
                <img id="film-gif" src="videos/film1.gif" alt="loading.."">
            </div>
            <div class="overlay"></div>
            
            <div class="films-container">
                <div class="film-content active" data-src="videos/film1.gif" data-thumbnail="videos/film1.png">
                    <h1 class="film-title">NORTH VALLEY</h1>
                    <!-- <p class="film-description">Film description goes here. This text will be responsive to scroll.</p> -->
                </div>
                
                <div class="film-content next" data-src="videos/film2.gif" data-thumbnail="videos/film2.png">
                    <h1 class="film-title">POSTCARDS OF SF</h1>
                </div>
                <div class="film-content" data-src="videos/comingsoon.jpg" data-thumbnail="videos/comingsoon.jpg">
                    <div class="coming-soon-container">
                        <h1 class="coming-soon-title">Coming Soonâ„¢</h1>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p> 2025, Jag Manalang.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const imageElement = document.getElementById('film-gif');
            const filmContents = document.querySelectorAll('.film-content');
            let currentIndex = 0;
            let isScrolling = false;
            
            // Preload thumbnails for instant display
            const thumbnailCache = {};
            const fullImageCache = {};
            
            filmContents.forEach(content => {
                const thumbnailSrc = content.dataset.thumbnail;
                const fullSrc = content.dataset.src;
                
                // Preload thumbnail
                if (thumbnailSrc && !thumbnailCache[thumbnailSrc]) {
                    const thumbImg = new Image();
                    thumbImg.src = thumbnailSrc;
                    thumbnailCache[thumbnailSrc] = thumbImg;
                }
                
                // Preload full image
                if (fullSrc && !fullImageCache[fullSrc]) {
                    const fullImg = new Image();
                    fullImg.src = fullSrc;
                    fullImageCache[fullSrc] = fullImg;
                }
            });

            // Function to update content with thumbnail-first loading
            function updateContent(index) {
                if (isScrolling) return;
                isScrolling = true;

                // Remove active and next classes from all contents
                filmContents.forEach(content => {
                    content.classList.remove('active', 'next');
                });
                
                // Add active class to current content
                filmContents[index].classList.add('active');
                
                // Add next class to the next content if it exists
                if (index < filmContents.length - 1) {
                    filmContents[index + 1].classList.add('next');
                }
                
                // Get thumbnail and full image sources
                const thumbnailSrc = filmContents[index].dataset.thumbnail;
                const fullSrc = filmContents[index].dataset.src;
                
                if (imageElement && thumbnailSrc && fullSrc) {
                    // First, show thumbnail instantly
                    imageElement.classList.add('loading');
                    imageElement.src = thumbnailSrc;
                    
                    // Then load full image with transition
                    setTimeout(() => {
                        if (fullImageCache[fullSrc]) {
                            // Full image is already cached, switch immediately
                            imageElement.src = fullSrc;
                            imageElement.classList.remove('loading');
                            imageElement.classList.add('loaded');
                        } else {
                            // Load full image
                            imageElement.onload = function() {
                                imageElement.classList.remove('loading');
                                imageElement.classList.add('loaded');
                            };
                            imageElement.src = fullSrc;
                        }
                    }, 100); // Small delay to ensure thumbnail is visible
                }

                // Reset scrolling flag after animation
                setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            }

            // Initial load - show first thumbnail then full image
            function initialLoad() {
                const firstContent = filmContents[0];
                const thumbnailSrc = firstContent.dataset.thumbnail;
                const fullSrc = firstContent.dataset.src;
                
                if (imageElement && thumbnailSrc && fullSrc) {
                    // Show thumbnail first
                    imageElement.classList.add('loading');
                    imageElement.src = thumbnailSrc;
                    
                    // Load full image
                    setTimeout(() => {
                        if (fullImageCache[fullSrc]) {
                            imageElement.src = fullSrc;
                            imageElement.classList.remove('loading');
                            imageElement.classList.add('loaded');
                        } else {
                            imageElement.onload = function() {
                                imageElement.classList.remove('loading');
                                imageElement.classList.add('loaded');
                            };
                            imageElement.src = fullSrc;
                        }
                    }, 200);
                }
            }
            
            // Start initial load
            initialLoad();

            // Handle scroll events
            let scrollTimeout;
            window.addEventListener('wheel', function(e) {
                e.preventDefault();
                
                if (isScrolling) return;

                if (e.deltaY > 0 && currentIndex < filmContents.length - 1) {
                    // Scrolling down
                    currentIndex++;
                    updateContent(currentIndex);
                } else if (e.deltaY < 0 && currentIndex > 0) {
                    // Scrolling up
                    currentIndex--;
                    updateContent(currentIndex);
                }
            }, { passive: false });

            // Prevent default scroll behavior
            window.addEventListener('scroll', function(e) {
                e.preventDefault();
                window.scrollTo(0, 0);
            }, { passive: false });
        });
    </script>
</body>
</html> 
